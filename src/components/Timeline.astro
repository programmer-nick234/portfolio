---
// Timeline section â€” Animated timeline for community & education
export interface TimelineItem {
  logo: string;
  title: string;
  organization: string;
  startDate: string;
  isPresent?: boolean;
}

export interface TimelineSection {
  title: string;
  items: TimelineItem[];
}

export interface Props {
  sections: TimelineSection[];
}

const { sections } = Astro.props;

function formatDate(dateStr: string): string {
  const date = new Date(dateStr);
  return date.toLocaleDateString('en-US', { month: 'short', year: 'numeric' });
}
---

<section id="timeline" class="relative py-20 sm:py-28 overflow-hidden">
  <!-- Divider -->
  <div class="absolute top-0 left-0 right-0 h-px bg-gradient-to-r from-transparent via-[#00f5ff]/20 to-transparent"></div>

  <div class="max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 w-full">
    <!-- Section Header -->
    <div class="text-center mb-16 sm:mb-20" data-animate="fade-up">
      <span class="inline-block text-xs uppercase tracking-[0.3em] text-[#22d3ee] mb-4 font-medium">Background</span>
      <h2 class="section-title text-[#f0f0f0] mb-4">
        Community & <span class="gradient-text-teal">Education</span>
      </h2>
    </div>

    <!-- Timeline Sections -->
    <div class="space-y-16">
      {sections.map((section, sIndex) => (
        <div data-animate="fade-up" data-animate-delay={(sIndex * 0.15).toString()}>
          <!-- Section Label -->
          <div class="flex items-center gap-3 mb-8">
            <div class="w-8 h-8 rounded-lg bg-[#22d3ee]/10 border border-[#22d3ee]/20 flex items-center justify-center">
              <i class={`fas ${section.title === 'Education' ? 'fa-graduation-cap' : 'fa-users'} text-xs text-[#22d3ee]`}></i>
            </div>
            <h3 class="text-base sm:text-lg font-bold text-[#f0f0f0]">{section.title}</h3>
            <div class="flex-1 h-px bg-gradient-to-r from-[#22d3ee]/15 to-transparent"></div>
          </div>

          <!-- Items -->
          <div class="space-y-4" data-stagger="0.1">
            {section.items.map((item) => (
              <div class="group glass-card rounded-xl p-4 sm:p-5 flex items-center gap-4 hover:scale-[1.01] transition-all duration-500">
                <!-- Logo -->
                <div class="w-12 h-12 sm:w-14 sm:h-14 rounded-xl overflow-hidden bg-white/5 border border-white/10 flex-shrink-0 group-hover:border-[#22d3ee]/20 transition-all duration-500">
                  <img 
                    src={item.logo} 
                    alt={item.organization} 
                    class="w-full h-full object-cover group-hover:scale-110 transition-transform duration-500"
                    loading="lazy"
                  />
                </div>
                
                <!-- Info -->
                <div class="flex-1 min-w-0">
                  <h4 class="text-sm sm:text-base font-bold text-[#f0f0f0] group-hover:text-white transition-colors truncate">{item.title}</h4>
                  <p class="text-xs sm:text-sm text-[#555]">{item.organization}</p>
                </div>

                <!-- Date -->
                <div class="flex items-center gap-2 flex-shrink-0">
                  <span class="text-[10px] font-mono text-[#555] hidden sm:inline">{formatDate(item.startDate)}</span>
                  {item.isPresent && (
                    <span class="flex items-center gap-1.5 px-2.5 py-1 rounded-full bg-[#22d3ee]/10 border border-[#22d3ee]/20">
                      <span class="w-1.5 h-1.5 rounded-full bg-[#22d3ee] animate-pulse"></span>
                      <span class="text-[10px] font-medium text-[#22d3ee]">Active</span>
                    </span>
                  )}
                </div>
              </div>
            ))}
          </div>
        </div>
      ))}
    </div>
  </div>
</section>