---
// Contact section component with email redirect
---

<section id="contact" class="py-12 bg-dark-bg overflow-hidden">
  <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 w-full">
    <!-- Main Contact Card -->
    <div class="bg-dark-card border border-dark-border rounded-2xl p-4 sm:p-6 lg:p-8 shadow-lg w-full">
      <!-- Heading -->
      <div class="text-center mb-6">
        <h2 class="text-2xl sm:text-3xl lg:text-4xl font-bold text-text-primary mb-3">
          Hey there!
        </h2>
        <p class="text-text-secondary text-sm sm:text-base max-w-lg mx-auto px-2">
          Got a project in mind? Want to collaborate? Or just want to say hi? Drop me a message and I'll get back to you as soon as possible!
        </p>
      </div>

      <!-- Social Links Row -->
      <div class="flex flex-col sm:flex-row flex-wrap justify-center gap-3 sm:gap-4 mb-6">
        <a
          href="mailto:nikhilbajantri86@gmail.com"
          class="flex items-center justify-center sm:justify-start space-x-2 px-3 sm:px-4 py-2 sm:py-3 bg-dark-bg border border-dark-border rounded-xl hover:border-neon-cyan hover:bg-neon-cyan/5 transition-all duration-300 text-center"
        >
          <i class="fas fa-envelope text-neon-cyan text-sm"></i>
          <span class="text-text-secondary text-xs sm:text-sm hidden sm:inline">Email</span>
          <span class="text-text-primary text-xs sm:text-sm truncate">nikhilbajantri86@gmail.com</span>
        </a>
        
        <a
          href="https://github.com/programmer-nick234/"
          class="flex items-center justify-center sm:justify-start space-x-2 px-3 sm:px-4 py-2 sm:py-3 bg-dark-bg border border-dark-border rounded-xl hover:border-neon-cyan hover:bg-neon-cyan/5 transition-all duration-300 text-center"
          target="_blank"
          rel="noopener noreferrer"
        >
          <i class="fab fa-github text-neon-cyan text-sm"></i>
          <span class="text-text-secondary text-xs sm:text-sm hidden sm:inline">GitHub</span>
          <span class="text-text-primary text-xs sm:text-sm truncate">@programmer-nick234</span>
        </a>
        
        <a
          href="https://www.linkedin.com/in/nikhil-bajantri-dev"
          class="flex items-center justify-center sm:justify-start space-x-2 px-3 sm:px-4 py-2 sm:py-3 bg-dark-bg border border-dark-border rounded-xl hover:border-neon-cyan hover:bg-neon-cyan/5 transition-all duration-300 text-center"
          target="_blank"
          rel="noopener noreferrer"
        >
          <i class="fab fa-linkedin text-neon-cyan text-sm"></i>
          <span class="text-text-secondary text-xs sm:text-sm hidden sm:inline">LinkedIn</span>
          <span class="text-text-primary text-xs sm:text-sm truncate">nikhil-bajantri-dev</span>
        </a>
      </div>

      <!-- Contact Form Card -->
      <div class="bg-dark-bg border border-dark-border rounded-xl p-4 sm:p-6 shadow-md w-full">
        <form 
          class="space-y-4 w-full" 
          id="contactForm"
        >
          <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <div class="relative w-full">
              <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                <i class="fas fa-envelope text-text-muted text-xs"></i>
              </div>
              <input
                type="email"
                id="email"
                name="email"
                class="w-full pl-8 pr-3 py-2 sm:py-3 bg-dark-card border border-dark-border rounded-lg text-text-primary placeholder-text-muted focus:border-neon-cyan focus:outline-none transition-colors duration-300 text-sm sm:text-base"
                placeholder="developer@domain.com"
                required
              />
            </div>
            
            <div class="relative w-full">
              <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                <i class="fas fa-user text-text-muted text-xs"></i>
              </div>
              <input
                type="text"
                id="name"
                name="name"
                class="w-full pl-8 pr-3 py-2 sm:py-3 bg-dark-card border border-dark-border rounded-lg text-text-primary placeholder-text-muted focus:border-neon-cyan focus:outline-none transition-colors duration-300 text-sm sm:text-base"
                placeholder="Developer X"
                required
              />
            </div>
          </div>
          
          <div class="relative w-full">
            <div class="absolute top-2 sm:top-3 left-3 flex items-center pointer-events-none">
              <i class="fas fa-comment text-text-muted text-xs"></i>
            </div>
            <textarea
              id="message"
              name="message"
              rows="4"
              class="w-full pl-8 pr-3 py-2 sm:py-3 bg-dark-card border border-dark-border rounded-lg text-text-primary placeholder-text-muted focus:border-neon-cyan focus:outline-none transition-colors duration-300 resize-none text-sm sm:text-base"
              placeholder="What's up?"
              required
            ></textarea>
          </div>
          
          <div class="flex justify-end pt-2">
            <button
              type="submit"
              id="submitBtn"
              class="px-6 sm:px-8 py-2 sm:py-3 bg-neon-cyan text-dark-bg font-medium rounded-lg hover:bg-neon-purple transition-colors duration-300 disabled:opacity-50 disabled:cursor-not-allowed shadow-md text-sm sm:text-base"
            >
              <span class="flex items-center space-x-2">
                <i class="fas fa-paper-plane text-sm"></i>
                <span id="submitText">Send Message</span>
              </span>
            </button>
          </div>
        </form>
        
        <!-- Message Container -->
        <div id="messageContainer" class="mt-4 hidden w-full">
          <div id="successMessage" class="hidden p-3 bg-green-900/20 border border-green-500/30 rounded-lg text-green-400 text-sm">
            <i class="fas fa-check-circle mr-2"></i>
            <span id="successText"></span>
          </div>
          <div id="errorMessage" class="hidden p-3 bg-red-900/20 border border-red-500/30 rounded-lg text-red-400 text-sm">
            <i class="fas fa-exclamation-circle mr-2"></i>
            <span id="errorText"></span>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<script>
  // Contact form handling
  document.addEventListener('DOMContentLoaded', function() {
    const form = document.getElementById('contactForm') as HTMLFormElement;
    const submitBtn = document.getElementById('submitBtn') as HTMLButtonElement;
    const submitIcon = document.getElementById('submitIcon') as HTMLElement;
    const submitText = document.getElementById('submitText') as HTMLElement;
    const messageContainer = document.getElementById('messageContainer') as HTMLElement;
    const successMessage = document.getElementById('successMessage') as HTMLElement;
    const errorMessage = document.getElementById('errorMessage') as HTMLElement;
    const successText = document.getElementById('successText') as HTMLElement;
    const errorText = document.getElementById('errorText') as HTMLElement;
    
    function showMessage(type: 'success' | 'error', message: string) {
      if (!messageContainer || !successMessage || !errorMessage || !successText || !errorText) return;
      
      // Hide all messages first
      messageContainer.classList.add('hidden');
      successMessage.classList.add('hidden');
      errorMessage.classList.add('hidden');
      
      // Show the appropriate message
      messageContainer.classList.remove('hidden');
      if (type === 'success') {
        successText.textContent = message;
        successMessage.classList.remove('hidden');
      } else {
        errorText.textContent = message;
        errorMessage.classList.remove('hidden');
      }
      
      // Auto-hide after 5 seconds
      setTimeout(() => {
        messageContainer.classList.add('hidden');
      }, 5000);
    }
    
    function setLoadingState(loading: boolean) {
      if (!submitBtn || !submitIcon || !submitText) return;
      
      if (loading) {
        submitBtn.disabled = true;
        submitIcon.className = 'fas fa-spinner fa-spin mr-2';
        submitText.textContent = 'Sending...';
      } else {
        submitBtn.disabled = false;
        submitIcon.className = 'fas fa-paper-plane mr-2';
        submitText.textContent = 'Send Message';
      }
    }
    
    if (form) {
      form.addEventListener('submit', function(e) {
        e.preventDefault();
        
        // Set loading state
        setLoadingState(true);
        
        try {
          // Get form data
          const formData = new FormData(form);
          
          // Get form values
          const email = formData.get('email') as string;
          const name = formData.get('name') as string;
          const message = formData.get('message') as string;
          
          // Enhanced validation
          if (!email?.trim() || !name?.trim() || !message?.trim()) {
            showMessage('error', 'Please fill all the fields');
            setLoadingState(false);
            return;
          }
          
          // Email validation
          const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
          if (!emailRegex.test(email)) {
            showMessage('error', 'Please enter a valid email address');
            setLoadingState(false);
            return;
          }
          
          // Create email body
          const subject = `Portfolio Contact from ${name}`;
          const body = `Name: ${name}\nEmail: ${email}\n\nMessage:\n${message}`;
          
          // Create mailto link
          const mailtoLink = `mailto:nikhilbajantri86@gmail.com?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(body)}`;
          
          // Show success message
          showMessage('success', 'Opening your email client...');
          
          // Open email client
          setTimeout(() => {
            window.open(mailtoLink, '_blank');
          }, 1000);
          
          // Reset form
          form.reset();
          
        } catch (error) {
          console.error('Contact form error:', error);
          showMessage('error', 'Sorry, something went wrong. Please try again.');
        } finally {
          setLoadingState(false);
        }
      });
    }
  });
</script>
