---
// Contact section component with Formspree integration
const socialLinks = [
  { name: "GitHub", icon: "fab fa-github", url: "https://github.com/programmer-nick234/", color: "hover:text-gray-400" },
  { name: "LinkedIn", icon: "fab fa-linkedin", url: "https://www.linkedin.com/in/nikhil-bajantri-dev", color: "hover:text-blue-400" },
  { name: "X (Twitter)", icon: "fab fa-x-twitter", url: "https://x.com/nikkkkhil_2604", color: "hover:text-blue-500" },
  { name: "Email", icon: "fas fa-envelope", url: "mailto:nikhilbajantri86@gmail.com", color: "hover:text-red-400" },
];
---

<section id="contact" class="py-20 bg-dark-card">
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    <div class="text-center mb-16">
      <h2 class="text-4xl sm:text-5xl font-bold text-text-primary mb-4">
        Get In <span class="text-neon-cyan">Touch</span>
      </h2>
      <div class="w-24 h-1 bg-neon-cyan mx-auto mb-6"></div>
      <p class="text-text-secondary text-lg max-w-2xl mx-auto">
        Let's work together on your next project. I'm always open to discussing new opportunities.
      </p>
    </div>

    <div class="grid lg:grid-cols-2 gap-12">
      <!-- Contact Form with Formspree -->
      <div class="bg-dark-bg border border-dark-border rounded-lg p-8">
        <h3 class="text-2xl font-semibold text-text-primary mb-6">
          Send me a message
        </h3>
        
        <!-- Formspree Form - Replace YOUR_FORMSPREE_ENDPOINT with your actual endpoint -->
        <form 
          class="space-y-6" 
          id="contactForm" 
          action="/api/contact"
          method="POST"
        >
          <div class="grid md:grid-cols-2 gap-6">
            <div>
              <label for="email" class="block text-text-secondary text-sm font-medium mb-2">
                Email
              </label>
              <input
                type="email"
                id="email"
                name="email"
                class="w-full px-4 py-3 bg-dark-card border border-dark-border rounded-lg text-text-primary placeholder-text-muted focus:border-neon-cyan focus:outline-none transition-colors duration-300"
                placeholder="developer@domain.com"
                required
              />
            </div>
            
            <div>
              <label for="name" class="block text-text-secondary text-sm font-medium mb-2">
                Name
              </label>
              <input
                type="text"
                id="name"
                name="name"
                class="w-full px-4 py-3 bg-dark-card border border-dark-border rounded-lg text-text-primary placeholder-text-muted focus:border-neon-cyan focus:outline-none transition-colors duration-300"
                placeholder="Developer X"
                required
              />
            </div>
          </div>
          
          <div>
            <label for="message" class="block text-text-secondary text-sm font-medium mb-2">
              Message
            </label>
            <textarea
              id="message"
              name="message"
              rows="3"
              class="w-full px-4 py-3 bg-dark-card border border-dark-border rounded-lg text-text-primary placeholder-text-muted focus:border-neon-cyan focus:outline-none transition-colors duration-300 resize-none"
              placeholder="What's up?"
              required
            ></textarea>
          </div>
          
          <button
            type="submit"
            id="submitBtn"
            class="w-full bg-neon-cyan text-dark-bg px-8 py-4 rounded-lg font-semibold text-lg hover:bg-neon-purple transition-all duration-300 transform hover:scale-105 hover:shadow-lg hover:shadow-neon-cyan/25 disabled:opacity-50 disabled:cursor-not-allowed"
          >
            <i class="fas fa-paper-plane mr-2" id="submitIcon"></i>
            <span id="submitText">Send Message</span>
          </button>
        </form>
        
        <!-- Message Container -->
        <div id="messageContainer" class="mt-4 hidden">
          <div id="successMessage" class="hidden p-4 bg-green-900/20 border border-green-500/30 rounded-lg text-green-400">
            <i class="fas fa-check-circle mr-2"></i>
            <span id="successText"></span>
          </div>
          <div id="errorMessage" class="hidden p-4 bg-red-900/20 border border-red-500/30 rounded-lg text-red-400">
            <i class="fas fa-exclamation-circle mr-2"></i>
            <span id="errorText"></span>
          </div>
        </div>
      </div>

      <!-- Contact Info -->
      <div class="space-y-8">
        <div>
          <h3 class="text-2xl font-semibold text-text-primary mb-6">
            Let's connect
          </h3>
          <p class="text-text-secondary text-lg leading-relaxed mb-8">
            I'm currently available for freelance work and full-time opportunities. 
            If you have a project that needs some creative thinking, I'd love to hear about it.
          </p>
        </div>

        <!-- Contact Details -->
        <div class="space-y-6">
          <div class="flex items-center space-x-4 group">
            <div class="w-12 h-12 bg-dark-bg border border-dark-border rounded-full flex items-center justify-center group-hover:border-neon-cyan transition-all duration-300">
              <i class="fas fa-envelope text-neon-cyan"></i>
            </div>
            <div>
              <p class="text-text-secondary text-sm">Email</p>
              <p class="text-text-primary font-medium">nikhilbajantri86@gmail.com</p>
            </div>
          </div>

          <div class="flex items-center space-x-4 group">
            <div class="w-12 h-12 bg-dark-bg border border-dark-border rounded-full flex items-center justify-center group-hover:border-neon-purple transition-all duration-300">
              <i class="fas fa-map-marker-alt text-neon-purple"></i>
            </div>
            <div>
              <p class="text-text-secondary text-sm">Location</p>
              <p class="text-text-primary font-medium">Mangaluru, Karnataka</p>
            </div>
          </div>

          <div class="flex items-center space-x-4 group">
            <div class="w-12 h-12 bg-dark-bg border border-dark-border rounded-full flex items-center justify-center group-hover:border-neon-green transition-all duration-300">
              <i class="fas fa-clock text-neon-green"></i>
            </div>
            <div>
              <p class="text-text-secondary text-sm">Availability</p>
              <p class="text-text-primary font-medium">Open to opportunities</p>
            </div>
          </div>
                 </div>

         <!-- Social Links -->
         <div>
           <h4 class="text-lg font-semibold text-text-primary mb-4">
             Follow me
           </h4>
           <div class="flex space-x-4">
             <a
               href="https://github.com/programmer-nick234/"
               class="w-12 h-12 bg-dark-bg border border-dark-border rounded-full flex items-center justify-center text-text-secondary hover:border-neon-cyan hover:text-neon-cyan transition-all duration-300 transform hover:scale-110 hover:shadow-lg hover:shadow-neon-cyan/25"
               title="GitHub"
               target="_blank"
               rel="noopener noreferrer"
             >
               <i class="fab fa-github text-xl"></i>
             </a>
             <a
               href="https://www.linkedin.com/in/nikhil-bajantri-dev"
               class="w-12 h-12 bg-dark-bg border border-dark-border rounded-full flex items-center justify-center text-text-secondary hover:border-neon-cyan hover:text-neon-cyan transition-all duration-300 transform hover:scale-110 hover:shadow-lg hover:shadow-neon-cyan/25"
               title="LinkedIn"
               target="_blank"
               rel="noopener noreferrer"
             >
               <i class="fab fa-linkedin text-xl"></i>
             </a>
             <a
               href="https://x.com/nikkkkhil_2604"
               class="w-12 h-12 bg-dark-bg border border-dark-border rounded-full flex items-center justify-center text-text-secondary hover:border-neon-cyan hover:text-neon-cyan transition-all duration-300 transform hover:scale-110 hover:shadow-lg hover:shadow-neon-cyan/25"
               title="X (Twitter)"
               target="_blank"
               rel="noopener noreferrer"
             >
               <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                 <path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/>
               </svg>
             </a>
           </div>
         </div>

       </div>
     </div>
   </div>
 </section>

<script>
  // Formspree form handling with enhanced UX
  const form = document.getElementById('contactForm') as HTMLFormElement;
  const submitBtn = document.getElementById('submitBtn') as HTMLButtonElement;
  const submitIcon = document.getElementById('submitIcon') as HTMLElement;
  const submitText = document.getElementById('submitText') as HTMLElement;
  const messageContainer = document.getElementById('messageContainer') as HTMLElement;
  const successMessage = document.getElementById('successMessage') as HTMLElement;
  const errorMessage = document.getElementById('errorMessage') as HTMLElement;
  const successText = document.getElementById('successText') as HTMLElement;
  const errorText = document.getElementById('errorText') as HTMLElement;
  
  function showMessage(type: 'success' | 'error', message: string) {
    // Hide all messages first
    messageContainer.classList.add('hidden');
    successMessage.classList.add('hidden');
    errorMessage.classList.add('hidden');
    
    // Show the appropriate message
    messageContainer.classList.remove('hidden');
    if (type === 'success') {
      successText.textContent = message;
      successMessage.classList.remove('hidden');
    } else {
      errorText.textContent = message;
      errorMessage.classList.remove('hidden');
    }
    
    // Auto-hide after 5 seconds
    setTimeout(() => {
      messageContainer.classList.add('hidden');
    }, 5000);
  }
  
  function setLoadingState(loading: boolean) {
    if (!submitBtn || !submitIcon || !submitText) return;
    
    if (loading) {
      submitBtn.disabled = true;
      submitIcon.className = 'fas fa-spinner fa-spin mr-2';
      submitText.textContent = 'Sending...';
    } else {
      submitBtn.disabled = false;
      submitIcon.className = 'fas fa-paper-plane mr-2';
      submitText.textContent = 'Send Message';
    }
  }
  
  if (form && submitBtn && submitIcon && submitText && messageContainer && successMessage && errorMessage && successText && errorText) {
    form.addEventListener('submit', async function(e) {
      e.preventDefault();
      
      // Set loading state
      setLoadingState(true);
      
      try {
        // Get form data
        const formData = new FormData(form);
        
        // Get form values
        const email = formData.get('email') as string;
        const name = formData.get('name') as string;
        const message = formData.get('message') as string;
        
        // Enhanced validation
        if (!email?.trim() || !name?.trim() || !message?.trim()) {
          showMessage('error', 'Please fill all the fields');
          setLoadingState(false);
          return;
        }
        
        // Email validation
        const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        if (!emailRegex.test(email)) {
          showMessage('error', 'Please enter a valid email address');
          setLoadingState(false);
          return;
        }
        
        // Submit to Formspree
        const response = await fetch(form.action, {
          method: 'POST',
          body: formData,
          headers: {
            'Accept': 'application/json'
          }
        });
        
        if (response.ok) {
          showMessage('success', 'Received your mail, I will reply back soon âœ¨');
          console.log('[SUCCESS] Mail sent by:', email);
          form.reset();
        } else {
          console.log('[ERROR] Formspree Response:', response.status);
          showMessage('error', 'Sorry, couldn\'t send the mail. Please try again.');
        }
      } catch (error) {
        console.log('[ERROR] Form submission:', error);
        showMessage('error', 'Sorry, couldn\'t send the mail');
      } finally {
        setLoadingState(false);
      }
    });
  }
</script>


