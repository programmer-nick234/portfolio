---
// Test page for PDF download
---

<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>PDF Test</title>
</head>
<body style="font-family: Arial, sans-serif; padding: 20px; background: #f0f0f0;">
  <h1>PDF Download Test</h1>
  
  <div style="margin: 20px 0;">
    <h2>Test 1: Direct Link</h2>
    <a href="/resume.pdf" style="color: blue; text-decoration: underline;">Click here to open PDF directly</a>
  </div>
  
  <div style="margin: 20px 0;">
    <h2>Test 2: Download Link</h2>
    <a href="/resume.pdf" download="test-resume.pdf" style="color: green; text-decoration: underline;">Click here to download PDF</a>
  </div>
  
  <div style="margin: 20px 0;">
    <h2>Test 3: JavaScript Download</h2>
    <button onclick="downloadPDF()" style="padding: 10px 20px; background: #007bff; color: white; border: none; border-radius: 5px; cursor: pointer;">
      Download with JavaScript
    </button>
  </div>
  
  <div style="margin: 20px 0;">
    <h2>Test 4: Fetch and Download</h2>
    <button onclick="fetchAndDownload()" style="padding: 10px 20px; background: #28a745; color: white; border: none; border-radius: 5px; cursor: pointer;">
      Fetch and Download
    </button>
  </div>
  
  <div id="status" style="margin: 20px 0; padding: 10px; background: #e9ecef; border-radius: 5px;"></div>

  <script>
    function downloadPDF() {
      const link = document.createElement('a');
      link.href = '/resume.pdf';
      link.download = 'test-resume.pdf';
      document.body.appendChild(link);
      link.click();
      document.body.removeChild(link);
      document.getElementById('status').textContent = 'Download initiated...';
    }
    
    function fetchAndDownload() {
      document.getElementById('status').textContent = 'Fetching PDF...';
      
      fetch('/resume.pdf')
        .then(response => {
          if (!response.ok) {
            throw new Error(`HTTP error! status: ${response.status}`);
          }
          document.getElementById('status').textContent = 'PDF fetched successfully, downloading...';
          return response.blob();
        })
        .then(blob => {
          const url = window.URL.createObjectURL(blob);
          const link = document.createElement('a');
          link.href = url;
          link.download = 'test-resume.pdf';
          document.body.appendChild(link);
          link.click();
          document.body.removeChild(link);
          window.URL.revokeObjectURL(url);
          document.getElementById('status').textContent = 'Download completed!';
        })
        .catch(error => {
          document.getElementById('status').textContent = `Error: ${error.message}`;
          console.error('Error:', error);
        });
    }
  </script>
</body>
</html>
